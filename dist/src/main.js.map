{"version":3,"sources":["../../src/main.js"],"names":["use","component","RouterConfig","routes","router","beforeEach","to","from","next","LoadingBar","start","title","meta","get","name","afterEach","finish","window","scrollTo","el","store","render","h","data","currentPageName","mounted","$route","created","tagsList","map","item","children","length","push","$store","commit"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;;;AAEA,cAAIA,GAAJ;AACA,cAAIA,GAAJ;AACA,cAAIA,GAAJ;AACA,cAAIC,SAAJ,CAAc,SAAd;;AAEA;AACA,IAAMC,eAAe;AACjBC;AADiB,CAArB;;AAIA,IAAMC,SAAS,wBAAcF,YAAd,CAAf;;AAEAE,OAAOC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,oBAAMC,UAAN,CAAiBC,KAAjB;AACA,mBAAKC,KAAL,CAAWL,GAAGM,IAAH,CAAQD,KAAnB;AACF,QAAI,CAAC,mBAAQE,GAAR,CAAY,MAAZ,CAAD,IAAwBP,GAAGQ,IAAH,KAAY,OAAxC,EAAiD;AAAG;AAClDN,aAAK;AACHM,kBAAM;AADH,SAAL;AAGD,KAJD,MAIO,IAAI,mBAAQD,GAAR,CAAY,MAAZ,KAAuBP,GAAGQ,IAAH,KAAY,OAAvC,EAAgD;AAAG;AACxDN,aAAK;AACHM,kBAAM;AADH,SAAL;AAGD,KAJM,MAIA;AACLN;AACD;AACF,CAdD;;AAgBAJ,OAAOW,SAAP,CAAiB,YAAM;AACnB,oBAAMN,UAAN,CAAiBO,MAAjB;AACAC,WAAOC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACH,CAHD;AAIA;AACA,kBAAQ;AACJC,QAAI,MADA;AAEJf,YAAQA,MAFJ;AAGJgB,0BAHI;AAIJC,YAAQ;AAAA,eAAKC,gBAAL;AAAA,KAJJ;AAKJC,UAAM;AACFC,yBAAiB;AADf,KALF;AAQJC,WARI,qBAQO;AACP,aAAKD,eAAL,GAAuB,KAAKE,MAAL,CAAYZ,IAAnC;AACH,KAVG;AAWJa,WAXI,qBAWO;AACP,YAAIC,WAAW,EAAf;AACA,0BAAUC,GAAV,CAAc,UAACC,IAAD,EAAU;AACpB,gBAAIA,KAAKC,QAAL,CAAcC,MAAd,IAAwB,CAA5B,EAA+B;AAC3BJ,yBAASK,IAAT,CAAcH,KAAKC,QAAL,CAAc,CAAd,CAAd;AACH,aAFD,MAEO;AACHH,yBAASK,IAAT,oCAAiBH,KAAKC,QAAtB;AACH;AACJ,SAND;AAOA,aAAKG,MAAL,CAAYC,MAAZ,CAAmB,aAAnB,EAAkCP,QAAlC;AACH;AArBG,CAAR","file":"main.js","sourcesContent":["import Vue from 'vue';\r\nimport iView from 'iview';\r\nimport VueRouter from 'vue-router';\r\nimport {routers, appRouter} from './router';\r\nimport Vuex from 'vuex';\r\nimport Util from 'util';\r\nimport App from './app.vue';\r\nimport Cookies from 'js-cookie';\r\nimport 'iview/dist/styles/iview.css';\r\nimport store from './store/index'\r\nimport svgIcon from './otherComponents/svg.vue';\r\n\r\nVue.use(VueRouter);\r\nVue.use(Vuex);\r\nVue.use(iView);\r\nVue.component('svgIcon', svgIcon);\r\n\r\n// 路由配置\r\nconst RouterConfig = {\r\n    routes: routers\r\n};\r\n\r\nconst router = new VueRouter(RouterConfig);\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    iView.LoadingBar.start();\r\n    Util.title(to.meta.title);\r\n  if (!Cookies.get('user') && to.name !== 'login') {  // 判断是否已经登录且前往的页面不是登录页\r\n    next({\r\n      name: 'login'\r\n    });\r\n  } else if (Cookies.get('user') && to.name === 'login') {  // 判断是否已经登录且前往的是登录页\r\n    next({\r\n      name: 'home_index'\r\n    });\r\n  } else {\r\n    next()\r\n  }\r\n});\r\n\r\nrouter.afterEach(() => {\r\n    iView.LoadingBar.finish();\r\n    window.scrollTo(0, 0);\r\n});\r\n// 状态管理\r\nnew Vue({\r\n    el: '#app',\r\n    router: router,\r\n    store: store,\r\n    render: h => h(App),\r\n    data: {\r\n        currentPageName: ''\r\n    },\r\n    mounted () {\r\n        this.currentPageName = this.$route.name;\r\n    },\r\n    created () {\r\n        let tagsList = [];\r\n        appRouter.map((item) => {\r\n            if (item.children.length <= 1) {\r\n                tagsList.push(item.children[0]);\r\n            } else {\r\n                tagsList.push(...item.children);\r\n            }\r\n        });\r\n        this.$store.commit('setTagsList', tagsList);\r\n    }\r\n});\r\n"]}