{"version":3,"sources":["../../../src/util/util.js"],"names":["util","title","window","document","ajaxUrl","ajax","create","baseURL","timeout","inOf","arr","targetArr","res","map","indexOf","item","oneOf","ele","showThisRoute","itAccess","currentAccess","getPathObjByName","vm","name","pathObj","$store","state","app","routers","filter","children","length","i","childArr","len","setCurrentPath","forEach","child","currentPathArr","path","currentPathObj","childObj","commit","openPage","$router","push","hasOpened","pageTagsList","index","String","prototype","getDate","strArr","split","date","Date","getYMD","retDate","getMonth","getDays","day1","day2","d1","d2","dayMilliSeconds","d1Ms","getTime","d2Ms","ret","day","array"],"mappings":"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","file":"util.js","sourcesContent":["import axios from 'axios';\r\nimport env from '../../config/dev.env';\r\nimport Cookies from 'js-cookie';\r\n\r\nlet util = {};\r\n\r\nutil.title = function (title) {\r\n  title = title || '软件协同管理';\r\n  window.document.title = title;\r\n};\r\n\r\nconst ajaxUrl = env === 'development'\r\n    ? 'http://127.0.0.1:8888'\r\n    : env === 'production'\r\n        ? 'https://www.url.com'\r\n        : 'https://debug.url.com';\r\n\r\nutil.ajax = axios.create({\r\n  baseURL: ajaxUrl,\r\n  timeout: 30000\r\n});\r\n\r\nutil.inOf = function (arr, targetArr) {\r\n  let res = true;\r\n  arr.map(item => {\r\n    if (targetArr.indexOf(item) < 0) {\r\n      res = false;\r\n    }\r\n  });\r\n  return res;\r\n};\r\n\r\nutil.oneOf = function (ele, targetArr) {\r\n  if (targetArr.indexOf(ele) >= 0) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nutil.showThisRoute = function (itAccess, currentAccess) {\r\n  if (typeof itAccess === 'object') {\r\n    return util.oneOf(currentAccess, itAccess);\r\n  } else {\r\n    return itAccess === currentAccess;\r\n  }\r\n};\r\n\r\nutil.getPathObjByName = function (vm, name) {\r\n  let pathObj = vm.$store.state.app.routers.filter((item) => {\r\n    if (item.children.length <= 1) {\r\n      return item.name === name;\r\n    } else {\r\n      let i = 0;\r\n      let childArr = item.children;\r\n      let len = childArr.length;\r\n      while (i < len) {\r\n        if (childArr[i].name === name) {\r\n          return true;\r\n        }\r\n        i++;\r\n      }\r\n      return false;\r\n    }\r\n  })[0];\r\n  return pathObj;\r\n};\r\n\r\nutil.setCurrentPath = function (vm, name) {\r\n  let title = '';\r\n  vm.$store.state.app.routers.forEach(item => {\r\n    if (item.children.length === 1) {\r\n      if (item.children[0].name === name) {\r\n        title = item.title;\r\n      }\r\n    } else {\r\n      item.children.forEach(child => {\r\n        if (child.name === name) {\r\n          title = child.title;\r\n        }\r\n      });\r\n    }\r\n  });\r\n  let currentPathArr = [];\r\n  if (name === 'home_index') {\r\n    currentPathArr = [\r\n      {\r\n        title: '首页',\r\n        path: '',\r\n        name: 'home_index'\r\n      }\r\n    ];\r\n  } else if (name.indexOf('_index') >= 0 && name !== 'home_index') {\r\n    currentPathArr = [\r\n      {\r\n        title: '首页',\r\n        path: '/home',\r\n        name: 'home_index'\r\n      },\r\n      {\r\n        title: title,\r\n        path: '',\r\n        name: name\r\n      }\r\n    ];\r\n  } else {\r\n    let currentPathObj = vm.$store.state.app.routers.filter(item => {\r\n      if (item.children.length <= 1) {\r\n        return item.children[0].name === name;\r\n      } else {\r\n        let i = 0;\r\n        let childArr = item.children;\r\n        let len = childArr.length;\r\n        while (i < len) {\r\n          if (childArr[i].name === name) {\r\n            return true;\r\n          }\r\n          i++;\r\n        }\r\n        return false;\r\n      }\r\n    })[0];\r\n    if (currentPathObj.children.length <= 1 && currentPathObj.name === 'home') {\r\n      currentPathArr = [\r\n        {\r\n          title: '首页',\r\n          path: '',\r\n          name: 'home_index'\r\n        }\r\n      ];\r\n    } else if (currentPathObj.children.length <= 1 && currentPathObj.name !== 'home') {\r\n      currentPathArr = [\r\n        {\r\n          title: '首页',\r\n          path: '/home',\r\n          name: 'home_index'\r\n        },\r\n        {\r\n          title: currentPathObj.title,\r\n          path: '',\r\n          name: name\r\n        }\r\n      ];\r\n    } else {\r\n      let childObj = currentPathObj.children.filter((child) => {\r\n        return child.name === name;\r\n      })[0];\r\n      currentPathArr = [\r\n        {\r\n          title: '首页',\r\n          path: '/home',\r\n          name: 'home_index'\r\n        },\r\n        {\r\n          title: currentPathObj.title,\r\n          path: '',\r\n          name: currentPathObj.name\r\n        },\r\n        {\r\n          title: childObj.title,\r\n          path: currentPathObj.path + '/' + childObj.path,\r\n          name: name\r\n        }\r\n      ];\r\n    }\r\n  }\r\n  vm.$store.commit('setCurrentPath', currentPathArr);\r\n\r\n  return currentPathArr;\r\n};\r\n\r\nutil.openPage = function (vm, name, title) {\r\n  vm.$router.push({\r\n    name: name\r\n  });\r\n  let hasOpened = false;\r\n  vm.pageTagsList.forEach((item, index) => {\r\n    if (item.name === name) {\r\n      hasOpened = true;\r\n      vm.$store.commit('moveToSecond', index);\r\n    }\r\n  });\r\n  if (!hasOpened) {\r\n    vm.$store.commit('inCreateTag', {name: name, title: title});\r\n  }\r\n};\r\nString.prototype.getDate = function () {\r\n  \"use strict\";\r\n  let strArr = this.split('-');\r\n  let date = new Date(strArr[0], strArr[1] - 1, strArr[2]);\r\n  return date;\r\n};\r\nDate.prototype.getYMD = function () {\r\n  let retDate = this.getMonth() + 1 + \"-\";    // 获取月份。\r\n  retDate += this.getDate();               // 获取日。\r\n  return retDate;                          // 返回日期。\r\n}\r\nutil.getDays = function (day1, day2) {\r\n  // 获取入参字符串形式日期的Date型日期\r\n  let d1 = day1.getDate();\r\n  let d2 = day2.getDate();\r\n\r\n  // 定义一天的毫秒数\r\n  let dayMilliSeconds = 1000 * 60 * 60 * 24;\r\n\r\n  // 获取输入日期的毫秒数\r\n  let d1Ms = d1.getTime();\r\n  let d2Ms = d2.getTime();\r\n\r\n  // 定义返回值\r\n  let ret;\r\n\r\n  // 对日期毫秒数进行循环比较，直到d1Ms 大于等于 d2Ms 时退出循环\r\n  // 每次循环结束，给d1Ms 增加一天\r\n  for (d1Ms; d1Ms <= d2Ms; d1Ms += dayMilliSeconds) {\r\n\r\n    // 如果ret为空，则无需添加\",\"作为分隔符\r\n    if (!ret) {\r\n      // 将给的毫秒数转换为Date日期\r\n      let day = new Date(d1Ms);\r\n\r\n      // 获取其年月日形式的字符串\r\n      ret = day.getYMD();\r\n    } else {\r\n\r\n      // 否则，给ret的每个字符日期间添加\",\"作为分隔符\r\n      let day = new Date(d1Ms);\r\n      ret = ret + ',' + day.getYMD();\r\n    }\r\n  }\r\n  let array = ret.split(\",\");\r\n  return array;\r\n};\r\n\r\nexport default util;\r\n"]}